<div class="cadastro-container">
  <div class="cadastro-image">
    <img src="assets/zé-gotinha.png" alt="Zé Gotinha" />
  </div>
  <div class="cadastro-form">
    <h2>Cadastro</h2>

    <!-- Mensagem de erro geral vinda da API -->
    <div
      *ngIf="errorMessage"
      class="error-message"
      style="color: red; margin-bottom: 1em"
    >
      {{ errorMessage }}
    </div>

    <form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <div>
          <label for="nome">Nome</label>
          <input
            type="text"
            id="nome"
            formControlName="nome"
            placeholder="Insira seu nome"
          />
        </div>
        <div>
          <label for="sobrenome">Sobrenome</label>
          <input
            type="text"
            id="sobrenome"
            formControlName="sobrenome"
            placeholder="Insira seu sobrenome"
          />
        </div>
      </div>

      <div class="form-group">
        <div>
          <label for="cpf">CPF</label>
          <input
            type="text"
            id="cpf"
            formControlName="cpf"
            placeholder="Insira seu CPF"
          />
        </div>
        <div>
          <label for="dataNascimento">Data Nascimento</label>
          <input
            type="date"
            id="dataNascimento"
            formControlName="dataNascimento"
          />
        </div>
      </div>

      <div class="form-group">
        <div>
          <label for="sexo">Sexo</label>
          <input
            type="text"
            id="sexo"
            formControlName="sexo"
            placeholder="Insira seu sexo"
          />
        </div>
      </div>

      <div class="form-group">
        <div>
          <label for="email">E-mail</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Insira seu email"
          />
        </div>
        <div>
          <label for="confirmEmail">Confirme o email</label>
          <input
            type="email"
            id="confirmEmail"
            formControlName="confirmEmail"
            placeholder="Confirme seu email"
            (blur)="checkEmailMatch()"
          />
          <div
            *ngIf="
              cadastroForm.get('confirmEmail')?.hasError('emailsMismatch') &&
              cadastroForm.get('confirmEmail')?.touched
            "
          >
            <small style="color: red">Os emails não coincidem.</small>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div>
          <label for="password">Senha</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Insira sua senha"
          />
        </div>
        <div>
          <label for="confirmPassword">Confirme sua senha</label>
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirme sua senha"
            (blur)="checkPasswordMatch()"
          />
          <div
            *ngIf="
              cadastroForm
                .get('confirmPassword')
                ?.hasError('passwordsMismatch') &&
              cadastroForm.get('confirmPassword')?.touched
            "
          >
            <small style="color: red">As senhas não coincidem.</small>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button type="button" class="voltar-button" (click)="onBack()">
          Voltar
        </button>
        <button type="submit" class="cadastro-button">Cadastrar</button>
      </div>
    </form>
  </div>
</div>
